@{
    ViewData["Title"] = "Dashboard";
    Layout = "_LayoutDashboard";

    @* var userRole = ViewBag.UserRole as string ?? ""; *@
    @* var userRole = Context.Session.GetString("UserRoleName") ?? "User"; *@
    var userRole = ViewBag.UserRole as string ?? "";
    var email = Context.Session.GetString("UserEmail") ?? "user@pertamina.com";
    var name = Context.Session.GetString("UserName") ?? "User";
    var role = Context.Session.GetString("UserRoleName") ?? "User"; 

    var initials = name.Length > 1
        ? $"{char.ToUpper(name[0])}{char.ToUpper(name[1])}"
        : $"{char.ToUpper(name[0])}";
}

<div class="max-w-6xl">
    <!-- Header -->
    <div class="flex items-start justify-between gap-4 mb-6">
        <div class="flex items-center gap-3">
            <div class="h-11 w-11 rounded-2xl bg-gray-900 text-white flex items-center justify-center font-bold">
                @initials
            </div>
            <div>
                <div class="text-2xl font-bold text-gray-900 leading-tight">
                    Welcome, @email üëã
                </div>
                <div class="mt-1 flex items-center gap-2">
                    <span class="text-sm text-gray-500">@name</span>
                    <span class="text-[11px] font-semibold px-2 py-1 rounded-full border border-gray-200 text-gray-600 bg-gray-50">
                        @role
                    </span>
                </div>
            </div>
        </div>

        <div class="hidden sm:flex items-center gap-2">
            <span class="text-[12px] text-gray-500">RIC Command Center</span>
            <span class="h-2 w-2 rounded-full bg-green-500"></span>
        </div>
    </div>

    <!-- Quick Stats (dummy dulu, nanti lu replace dari data) -->
    @* <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-6">
        <div class="rounded-2xl border border-gray-200 bg-white p-4">
            <div class="text-xs text-gray-500">Total RIC</div>
            <div class="mt-1 text-2xl font-bold text-gray-900">124</div>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-4">
            <div class="text-xs text-gray-500">Waiting My Action</div>
            <div class="mt-1 text-2xl font-bold text-gray-900">7</div>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-4">
            <div class="text-xs text-gray-500">In Progress</div>
            <div class="mt-1 text-2xl font-bold text-gray-900">43</div>
        </div>
        <div class="rounded-2xl border border-gray-200 bg-white p-4">
            <div class="text-xs text-gray-500">Completed</div>
            <div class="mt-1 text-2xl font-bold text-gray-900">81</div>
        </div>
    </div> *@

    <!-- RIC Cards (2 core + 1 support) -->
    <div class="grid grid-cols-1 md:grid-cols-12 gap-4">

        <!-- CORE 1: New Development -->
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-all
                    md:col-span-6">
            <div class="flex flex-col h-full">
                <div class="inline-flex items-center gap-2 text-[11px] font-semibold px-2 py-1 rounded-full
                            bg-gray-100 text-gray-700 w-fit">
                    ‚ú® CREATE
                </div>

                <div class="mt-3 text-base font-bold text-gray-900">
                    RIC New Development &amp; Enhancement
                </div>
                <p class="mt-2 text-sm text-gray-600 leading-relaxed flex-1">
                    Buat dan kelola form RIC baru dengan alur persetujuan otomatis antar divisi.
                </p>

                @* <div class="mt-5">
                    <a 
                    asp-controller="RicUser"
                    asp-action="UserIndex"
                       class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white
                              hover:bg-black transition">
                        Buka Form RIC
                        <span class="opacity-80">‚Üí</span>
                    </a>
                </div> *@
                @if (userRole.StartsWith("User_", StringComparison.OrdinalIgnoreCase))
                {
                    <div class="mt-5">
                    <a 
                    asp-controller="RicUser"
                    asp-action="UserIndex"
                       class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white
                              hover:bg-black transition">
                        Buka Form RIC
                        <span class="opacity-80">‚Üí</span>
                    </a>
                </div> 
                } else {
                    <div class="mt-5">
                    <a 
                    asp-controller="RicReview"
                    asp-action="ReviewIndex"
                       class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white
                              hover:bg-black transition">
                        Buka Form RIC
                        <span class="opacity-80">‚Üí</span>
                    </a>
                </div> 
                }
            </div>
        </div>

        <!-- CORE 2: RIC Roll Out -->
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-all
                    md:col-span-6 relative overflow-hidden">
            <div class="absolute -top-16 -right-16 h-40 w-40 rounded-full bg-gray-100"></div>

            <div class="flex items-start justify-between gap-4 relative">
                <div>
                    <div class="inline-flex items-center gap-2 text-[11px] font-semibold px-2 py-1 rounded-full
                                bg-gray-900 text-white">
                        <span class="h-1.5 w-1.5 rounded-full bg-green-400"></span>
                        CORE WORKFLOW
                    </div>

                    <div class="mt-3 text-lg font-bold text-gray-900">
                        RIC Roll Out
                    </div>
                    <p class="mt-2 text-sm text-gray-600 leading-relaxed max-w-xl">
                        Kelola proses implementasi RIC yang sedang berjalan. Pantau status, progres, timeline, dan approval flow end-to-end.
                    </p>

                    <div class="mt-4 flex flex-wrap gap-2">
                        <span class="text-[12px] px-2 py-1 rounded-full border border-gray-200 bg-gray-50 text-gray-600">Tracking</span>
                        <span class="text-[12px] px-2 py-1 rounded-full border border-gray-200 bg-gray-50 text-gray-600">Approval</span>
                        <span class="text-[12px] px-2 py-1 rounded-full border border-gray-200 bg-gray-50 text-gray-600">Timeline</span>
                    </div>
                </div>

                <div class="hidden sm:flex h-10 w-10 rounded-2xl bg-gray-900 text-white items-center justify-center">
                    <span class="text-sm">‚Üó</span>
                </div>
            </div>

            <div class="mt-5 relative">
                @if (userRole.StartsWith("User_", StringComparison.OrdinalIgnoreCase))
                {
                    <a href="/RicRollOut/User"
                       class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white
                              hover:bg-black transition">
                        Go to Roll Out
                        <span class="opacity-80">‚Üí</span>
                    </a>
                }
                else
                {
                    <a href="/RicRollOut/Review"
                       class="inline-flex items-center gap-2 rounded-xl bg-gray-900 px-4 py-2 text-sm font-semibold text-white
                              hover:bg-black transition">
                        Go to Roll Out
                        <span class="opacity-80">‚Üí</span>
                    </a>
                }
            </div>
        </div>

        <!-- SUPPORT: Undangan -->
        <div class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-all md:col-span-12">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                <div>
                    <div class="inline-flex items-center gap-2 text-[11px] font-semibold px-2 py-1 rounded-full
                                bg-gray-50 text-gray-700 border border-gray-200 w-fit">
                        ‚úâÔ∏è SUPPORT
                    </div>
                    <div class="mt-2 text-base font-bold text-gray-900">
                        Undangan Email RIC
                    </div>
                    <p class="mt-1 text-sm text-gray-600 leading-relaxed">
                        Kirim undangan ke user lain untuk mengisi atau meninjau Form RIC melalui email resmi.
                    </p>
                </div>

                <div class="flex items-center gap-2">
                    <a href="#"
                       class="inline-flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-sm font-semibold text-gray-900
                              border border-gray-200 hover:bg-gray-50 transition">
                        Tambah Email
                        <span class="opacity-80">‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>


@* 
<!-- Stats Cards -->
<div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6">

    <div class="bg-white rounded-xl shadow p-5">
        <div class="text-gray-500">Total RIC</div>
        <div class="text-3xl font-bold text-red-600">124</div>
    </div>

    <div class="bg-white rounded-xl shadow p-5">
        <div class="text-gray-500">Completed</div>
        <div class="text-3xl font-bold text-green-600">67</div>
    </div>

    <div class="bg-white rounded-xl shadow p-5">
        <div class="text-gray-500">Pending</div>
        <div class="text-3xl font-bold text-yellow-600">28</div>
    </div>

    <div class="bg-white rounded-xl shadow p-5">
        <div class="text-gray-500">Rejected</div>
        <div class="text-3xl font-bold text-red-600">12</div>
    </div>

</div>

<!-- Table -->
<div class="mt-10 bg-white shadow rounded-xl p-6 overflow-x-auto">
    <div class="flex justify-between items-center mb-4">
        <div class="font-bold text-lg">Recent Activities</div>
        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
            View All
        </button>
    </div>

    <table class="min-w-full border-collapse">
        <thead class="bg-gray-50 text-gray-700">
            <tr>
                <th class="p-3 text-left">Title</th>
                <th class="p-3 text-left">Status</th>
                <th class="p-3 text-left">Date</th>
            </tr>
        </thead>
        <tbody class="text-gray-700">

            <tr class="border-t hover:bg-gray-50">
                <td class="p-3">Create RIC Proposal - Branch</td>
                <td class="p-3 text-green-600">Completed</td>
                <td class="p-3">27 Nov 2025</td>
            </tr>

            <tr class="border-t hover:bg-gray-50">
                <td class="p-3">Process Approval SARM</td>
                <td class="p-3 text-yellow-600">Pending</td>
                <td class="p-3">25 Nov 2025</td>
            </tr>

            <tr class="border-t hover:bg-gray-50">
                <td class="p-3">Business Process Review</td>
                <td class="p-3 text-red-600">Rejected</td>
                <td class="p-3">21 Nov 2025</td>
            </tr>

        </tbody>
    </table>
</div> *@
